{% extends 'core/base.html' %}

{% load static %}

{% block title %} Edit profile {% endblock %}

{% block content %}
    <div class="flex flex-col max-w-[600px] w-full rounded-xl bg-gray-50 self-center shadow-lg">
        <div class="flex px-4 py-2 bg-rose-700 w-full justify-between items-center rounded-t-xl">
            <p class="font-medium text-gray-50 text-lg">Edit profile</p>
            <a href="javascript:history.back()"><img src="{% static 'teknotes/images/Close.svg' %}" alt="x"></a>
        </div>

        <div class="flex flex-col items-center justify-center">
            <form action="." method="post" class="flex flex-col w-full" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="flex flex-col p-6 gap-3">
                    <div class="flex gap-3 w-full">
                        <div id="avatar" class="cursor-pointer flex aspect-square h-full rounded-xl bg-[url('{{ profile.avatar.url }}')] bg-cover border-2 border-yellow-500 relative" onclick="document.getElementById('profileImageInput').click();">
                        </div>

                        <div class="flex flex-col gap-3 w-full overflow-hidden">
                            <div class="flex gap-3 px-4 py-3 border-2 border-yellow-500 rounded-xl w-full">
                                <img src="{% static 'teknotes/images/Image.svg' %}" alt="Image">
                                <input type="file" accept="image/*" id="profileImageInput" name="avatar" class="w-full text-gray-700">
                            </div>

                            <script>
                                $('#profileImageInput').change(function() {
                                    var input = this;
                                    if (input.files && input.files[0]) {
                                        var reader = new FileReader();
                                        reader.onload = function(e) {
                                            $('#avatar').css('background-image', 'url(' + e.target.result + ')');
                                        }
                                        reader.readAsDataURL(input.files[0]);
                                    }
                                });
                            </script>

                            <div class="flex gap-3 w-full">
                                <div class="flex gap-3 px-4 py-3 border-2 border-yellow-500 rounded-xl flex-1">
                                    <svg class="fill-yellow-500" height="22" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                        <path d="M272 304h-96C78.8 304 0 382.8 0 480c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32C448 382.8 369.2 304 272 304zM48.99 464C56.89 400.9 110.8 352 176 352h96c65.16 0 119.1 48.95 127 112H48.99zM224 256c70.69 0 128-57.31 128-128c0-70.69-57.31-128-128-128S96 57.31 96 128C96 198.7 153.3 256 224 256zM224 48c44.11 0 80 35.89 80 80c0 44.11-35.89 80-80 80S144 172.1 144 128C144 83.89 179.9 48 224 48z"/>
                                    </svg>
                                    <input type="text" id="firstName" name="first_name" class="placeholder-gray-500 text-gray-700 bg-transparent border-none focus:outline-none flex-1 w-full" placeholder="First Name" value="{{ profile.user.first_name }}">
                                </div>
                                <div class="flex gap-3 px-4 py-3 border-2 border-yellow-500 rounded-xl flex-1">
                                    <svg class="fill-yellow-500" height="22" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                        <path d="M272 304h-96C78.8 304 0 382.8 0 480c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32C448 382.8 369.2 304 272 304zM48.99 464C56.89 400.9 110.8 352 176 352h96c65.16 0 119.1 48.95 127 112H48.99zM224 256c70.69 0 128-57.31 128-128c0-70.69-57.31-128-128-128S96 57.31 96 128C96 198.7 153.3 256 224 256zM224 48c44.11 0 80 35.89 80 80c0 44.11-35.89 80-80 80S144 172.1 144 128C144 83.89 179.9 48 224 48z"/>
                                    </svg>
                                    <input type="text" id="lastName" name="last_name" class="placeholder-gray-500 text-gray-700 bg-transparent border-none focus:outline-none flex-1 w-full" placeholder="Last Name" value="{{ profile.user.last_name }}">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="flex flex-col gap-3 px-4 py-3 border-2 border-yellow-500 rounded-xl">
                        <textarea id="bio" name="bio" class="placeholder-gray-500 text-gray-700 bg-transparent border-none focus:outline-none flex-1 resize-none" rows="3" placeholder="Bio">{{ profile.bio }}</textarea>
                    </div>

                    <div class="flex gap-3 px-4 py-3 border-2 border-yellow-500 rounded-xl">
                        <svg class="fill-yellow-500" height="22" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                            <path d="M256 168C207.4 168 168 207.4 168 256s39.38 88 88 88S344 304.6 344 256S304.6 168 256 168zM256 296C233.1 296 216 278 216 256c0-21.1 17.1-40 40-40c21.1 0 40 18 40 40C296 278 277.1 296 256 296zM488 232h-41.63C435.5 145.2 366.8 76.5 280 65.62V23.1c0-13.25-10.75-24-23.1-24S232 10.75 232 23.1V65.62C145.2 76.5 76.5 145.2 65.62 232H23.1C10.75 232 0 242.7 0 255.1S10.75 280 23.1 280h41.63C76.5 366.8 145.2 435.5 232 446.4v41.63c0 13.25 10.75 23.1 23.1 23.1S280 501.3 280 488v-41.63C366.8 435.5 435.5 366.8 446.4 280H488c13.25 0 24-10.75 24-23.1S501.3 232 488 232zM256 400c-79.38 0-144-64.63-144-144S176.6 112 256 112s144 64.62 144 144S335.4 400 256 400z"/>
                        </svg>
                        <input type="text" id="location" name="location" class="placeholder-gray-500 text-gray-700 bg-transparent border-none focus:outline-none flex-1 w-full" placeholder="Location" value="{{ profile.location }}">
                    </div>
                </div>

                <div class="flex p-6 gap-3 w-full border-t-2 border-gray-200 items-center">
                    <button class="px-4 py-2 text-gray-50 bg-rose-700 font-medium rounded-md w-full">Done</button>
                    <a href="javascript:history.back()" class="flex px-4 py-2 bg-gray-200 rounded-md w-full justify-center">
                        <p class="text-gray-700">Cancel</p>
                    </a>
                </div>
            </form>
        </div>
    </div>
{% endblock %}
