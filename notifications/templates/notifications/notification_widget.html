{% load static %} {% load custom_filters %}

<div class="relative">
    <svg id="notif-button" class="fill-gray-700" height="22" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
    <path d="M439.4 362.3C420.1 341.5 383.9 310.2 383.9 208c0-77.75-54.38-139.9-127.9-155.1V32c0-17.62-14.38-32-32-32S192 14.38 192 32v20.88C118.5 68.12 64.13 130.2 64.13 208c0 102.2-36.25 133.5-55.5 154.3C2.625 368.8 0 376.5 0 384c.125 16.38 13 32 32.13 32h383.8c19.12 0 32-15.62 32.13-32C448 376.5 445.4 368.8 439.4 362.3zM67.5 368C88.75 340 112 293.6 112 208.6V208C112 146.1 162.1 96 224 96s112 50.12 112 112v.625C336 293.6 359.2 340 380.5 368H67.5zM223.1 512C259.4 512 288 483.4 288 448H160C160 483.4 188.6 512 223.1 512z"/>
    </svg>

    <div id="notif-dropdown" class="absolute top-10 bg-white rounded-lg w-60 overflow-hidden">
        <h4 class="bg-red-400 p-2">Notification</h4>
        {% for notif in notifications  %}
        <div  class="border-t border-gray-400 p-2 flex">
            <a href="{% url 'authentication:profile' notif.sender.id %}">
                <img class="h-6 w-6 aspect-square rounded-full" src="{{ notif.sender.profile.avatar.url }}" alt="Profile Image">
                <p class="text-lg font-bold">
                    {{ notif.sender }}
                </p>
            </a>
            <a href={{ notif.get_url }}>{{ notif.get_content }}</a>
        </div>
        {% endfor %}
    </div>
</div>

<script>
    $(document).ready(function() {
        var dropdown = $("#notif-dropdown");
        dropdown.hide();

        $("#notif-button").click(function() {
            if (dropdown.is(":visible")) {
            dropdown.hide(150);
            } else {
            dropdown.show(150);
            }
        })
    })
</script>